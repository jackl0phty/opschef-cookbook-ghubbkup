#!/usr/bin/env ruby

# Include required libraries.
require 'optparse'

# Declare variables.

options = {}

opt_parser = OptionParser.new do |opt|
  opt.banner = "Usage: chefknife COMMAND [OPTIONS]"
  opt.separator  ""
  opt.separator  "Commands"
  opt.separator  "     all: Backups ALL Git repos on Github under a single user account."
  opt.separator  ""
  opt.separator  "Options"

  opt.on("-h","--help","help") do
    puts opt_parser
  end
end

opt_parser.parse!

def get_config

  # Declare local variables.
  conf_dir = '/etc/ghubbkup.conf'

  # Declare array.
  ghubbkup_config = []

  # Read ghubbkup config & get github settings.
  ghubbkup_config = File.open("#{conf_dir}").map.each do |line|
    line.chomp!
    line.split('~~')
  end

  # Loop array & clone ALL Github repos.
  for config in ghubbkup_config

    # Uncomment lines below to debug.
    puts "Github options: #{config}"

  end

end

case ARGV[0]

when "all"

  # Get config options.
  get_config

else
  puts opt_parser
end
